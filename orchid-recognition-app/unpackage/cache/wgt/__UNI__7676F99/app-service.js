if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((i=>t.resolve(e()).then((()=>i))),(i=>t.resolve(e()).then((()=>{throw i}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e){"use strict";function t(e,t,...i){uni.__log__?uni.__log__(e,t,...i):console[e].apply(console,[...i,t])}const i=(e,t)=>{const i=e.__vccOpts||e;for(const[o,n]of t)i[o]=n;return i};const o=i({data:()=>({username:"",password:"",isLoading:!1}),methods:{login(){this.username&&this.password?(this.isLoading=!0,t("log","at pages/Login/Login.vue:65","正在进行登录验证..."),uni.showLoading({title:"登录中..."}),setTimeout((()=>{this.isLoading=!1,uni.hideLoading(),uni.reLaunch({url:"/pages/Recognition/Recognition"})}),1500)):uni.showToast({title:"用户名或密码不能为空",icon:"none"})}}},[["render",function(t,i,o,n,a,l){return e.openBlock(),e.createElementBlock("view",{class:"login-container"},[e.createElementVNode("view",{class:"bg-decoration"},[e.createElementVNode("view",{class:"floating-orchid orchid-1"}),e.createElementVNode("view",{class:"floating-orchid orchid-2"}),e.createElementVNode("view",{class:"floating-orchid orchid-3"})]),e.createElementVNode("view",{class:"content-wrapper"},[e.createElementVNode("view",{class:"logo-wrapper"},[e.createElementVNode("view",{class:"logo-container"},[e.createElementVNode("image",{class:"logo",src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBldGFsR3JhZGllbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPgogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjojRkY2Qjk1O3N0b3Atb3BhY2l0eToxIiAvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNDNzU5RjA7c3RvcC1vcGFjaXR5OjEiIC8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJsZWFmR3JhZGllbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPgogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjojNDBFMEQwO3N0b3Atb3BhY2l0eToxIiAvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiMzOEJERjg7c2lvcC1vcGFjaXR5OjEiIC8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KICA8IS0tIE9yY2hpZCBQZXRhbCAtLT4KICA8ZWxsaXBzZSBjeD0iNTAiIGN5PSIzMCIgcng9IjE1IiByeT0iMjAiIGZpbGw9InVybCgjcGV0YWxHcmFkaWVudCkiIHRyYW5zZm9ybT0icm90YXRlKDEwIDUwIDMwKSIvPgogIDxlbGxpcHNlIGN4PSI3MCIgY3k9IjQwIiByeD0iMTIiIHJ5PSIxOCIgZmlsbD0idXJsKCNwZXRhbEdyYWRpZW50KSIgdHJhbnNmb3JtPSJyb3RhdGUoNDUgNzAgNDApIi8+CiAgPGVsbGlwc2UgY3g9IjMwIiBjeT0iNDAiIHJ4PSIxMiIgcnk9IjE4IiBmaWxsPSJ1cmwoI3BldGFsR3JhZGllbnQpIiB0cmFuc2Zvcm09InJvdGF0ZSgtNDUgMzAgNDApIi8+CiAgPGVsbGlwc2UgY3g9IjUwIiBjeT0iNjUiIHJ4PSIyMCIgcnk9IjE1IiBmaWxsPSJ1cmwoI3BldGFsR3JhZGllbnQpIiB0cmFuc2Zvcm09InJvdGF0ZSgwIDUwIDY1KSIvPgogIDwhLS0gU3RlbSAtLT4KICA8cmVjdCB4PSI0OCIgeT0iNzAiIHdpZHRoPSI0IiBoZWlnaHQ9IjI1IiBmaWxsPSJ1cmwoI2xlYWZHcmFkaWVudCkiIHJ4PSIyIi8+CiAgPCEtLSBMZWF2ZXMgLS0+CiAgPGVsbGlwc2UgY3g9IjM1IiBjeT0iODAiIHJ4PSI4IiByeT0iMTIiIGZpbGw9InVybCgjbGVhZkdyYWRpZW50KSIgdHJhbnNmb3JtPSJyb3RhdGUoLTMwIDM1IDgwKSIvPgogIDxlbGxpcHNlIGN4PSI2NSIgY3k9IjgwIiByeD0iOCIgcnk9IjEyIiBmaWxsPSJ1cmwoI2xlYWZHcmFkaWVudCkiIHRyYW5zZm9ybT0icm90YXRlKDMwIDY1IDgwKSIvPgo8L3N2Zz4="}),e.createElementVNode("view",{class:"logo-shine"})]),e.createElementVNode("view",{class:"title"},"兰花识别专家"),e.createElementVNode("view",{class:"subtitle"},"AI 驱动的智能花卉识别")]),e.createElementVNode("view",{class:"form"},[e.createElementVNode("view",{class:"input-wrapper"},[e.createElementVNode("view",{class:"input-icon"},"👤"),e.withDirectives(e.createElementVNode("input",{class:"input-item",type:"text","onUpdate:modelValue":i[0]||(i[0]=e=>a.username=e),placeholder:"请输入用户名"},null,512),[[e.vModelText,a.username]])]),e.createElementVNode("view",{class:"input-wrapper"},[e.createElementVNode("view",{class:"input-icon"},"🔒"),e.withDirectives(e.createElementVNode("input",{class:"input-item",type:"password","onUpdate:modelValue":i[1]||(i[1]=e=>a.password=e),placeholder:"请输入密码"},null,512),[[e.vModelText,a.password]])]),e.createElementVNode("button",{class:"login-btn",onClick:i[2]||(i[2]=(...e)=>l.login&&l.login(...e)),disabled:a.isLoading},[a.isLoading?(e.openBlock(),e.createElementBlock("view",{key:0,class:"loading-spinner"})):e.createCommentVNode("",!0),e.createElementVNode("text",null,e.toDisplayString(a.isLoading?"登录中...":"立即登录"),1),e.createElementVNode("view",{class:"btn-glow"})],8,["disabled"])]),e.createElementVNode("view",{class:"tips"},[e.createElementVNode("view",{class:"tip-icon"},"💡"),e.createElementVNode("text",null,"演示模式：输入任意内容即可体验")])])])}],["__scopeId","data-v-6c635a18"]]);const n=i({data:()=>({imageSrc:"",isLoading:!1,isUploading:!1,result:{name:"",latin:"",confidence:0,features:[]}}),methods:{chooseImage(){this.isUploading=!0,uni.chooseImage({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:e=>{setTimeout((()=>{this.imageSrc=e.tempFilePaths[0],this.result={name:"",latin:"",confidence:0,features:[]},this.isUploading=!1,uni.showToast({title:"图片上传成功",icon:"success",duration:1500})}),800)},fail:()=>{this.isUploading=!1,uni.showToast({title:"图片选择失败",icon:"error"})}})},startRecognition(){this.imageSrc?(this.isLoading=!0,uni.showLoading({title:"AI正在努力识别中..."}),uni.uploadFile({url:"http://61.136.101.57:5000/predict",filePath:this.imageSrc,name:"file",success:e=>{const t=JSON.parse(e.data);if("成功"===t.message){const e=t.top5_info[0];this.result={name:e.name,latin:"",confidence:e.confidence,features:[]},uni.showToast({title:"识别完成！",icon:"success",duration:2e3})}else uni.showToast({title:"识别失败："+t.error,icon:"error"})},fail:e=>{uni.showToast({title:"请求失败："+e.errMsg,icon:"error"})},complete:()=>{this.isLoading=!1,uni.hideLoading()}})):uni.showToast({title:"请先选择一张图片",icon:"none",duration:2e3})},clearResult(){this.result={name:"",latin:"",confidence:0,features:[]},uni.showToast({title:"结果已清除",icon:"none",duration:1500})},logout(){uni.showModal({title:"确认退出",content:"确定要退出当前账户吗？",success:e=>{e.confirm&&uni.reLaunch({url:"/pages/Login/Login"})}})},getConfidenceLevel:e=>e>=.9?"high":e>=.7?"medium":"low",getConfidenceText:e=>e>=.9?"高可信度":e>=.7?"中等可信度":"低可信度"}},[["render",function(t,i,o,n,a,l){return e.openBlock(),e.createElementBlock("view",{class:"recognition-container"},[e.createElementVNode("view",{class:"header-decoration"},[e.createElementVNode("view",{class:"decoration-circle circle-1"}),e.createElementVNode("view",{class:"decoration-circle circle-2"}),e.createElementVNode("view",{class:"decoration-circle circle-3"})]),e.createElementVNode("view",{class:"page-title"},[e.createElementVNode("view",{class:"title-icon"},"🌺"),e.createElementVNode("text",{class:"title-text"},"AI 兰花识别"),e.createElementVNode("text",{class:"subtitle-text"},"上传图片，智能识别兰花品种")]),e.createElementVNode("view",{class:"upload-section"},[e.createElementVNode("view",{class:e.normalizeClass(["image-wrapper",{"has-image":a.imageSrc,uploading:a.isUploading}]),onClick:i[0]||(i[0]=(...e)=>l.chooseImage&&l.chooseImage(...e))},[a.imageSrc?(e.openBlock(),e.createElementBlock("image",{key:0,src:a.imageSrc,class:"preview-image",mode:"aspectFill"},null,8,["src"])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"placeholder"},[e.createElementVNode("view",{class:"upload-icon"},[e.createElementVNode("view",{class:"icon-camera"},"📷")]),e.createElementVNode("text",{class:"placeholder-text"},"点击上传兰花图片"),e.createElementVNode("text",{class:"placeholder-subtext"},"支持相册选择或相机拍摄")])),a.isUploading?(e.openBlock(),e.createElementBlock("view",{key:2,class:"upload-overlay"},[e.createElementVNode("view",{class:"upload-spinner"}),e.createElementVNode("text",{class:"upload-text"},"图片上传中...")])):e.createCommentVNode("",!0)],2)]),a.result.name?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["result-card",{show:a.result.name}])},[e.createElementVNode("view",{class:"card-header"},[e.createElementVNode("view",{class:"result-badge"},[e.createElementVNode("text",{class:"badge-text"},"AI识别结果")]),e.createElementVNode("view",{class:e.normalizeClass(["confidence-chip",l.getConfidenceLevel(a.result.confidence)])},e.toDisplayString(l.getConfidenceText(a.result.confidence)),3)]),e.createElementVNode("view",{class:"result-content"},[e.createElementVNode("view",{class:"species-info"},[e.createElementVNode("view",{class:"species-icon"},"🌸"),e.createElementVNode("view",{class:"species-details"},[e.createElementVNode("text",{class:"species-name"},e.toDisplayString(a.result.name),1),e.createElementVNode("text",{class:"species-latin"},e.toDisplayString(a.result.latin||"Orchidaceae Family"),1)])]),e.createElementVNode("view",{class:"confidence-section"},[e.createElementVNode("view",{class:"confidence-label"},[e.createElementVNode("text",{class:"label-text"},"识别置信度"),e.createElementVNode("text",{class:"confidence-value"},e.toDisplayString((100*a.result.confidence).toFixed(1))+"%",1)]),e.createElementVNode("view",{class:"progress-container"},[e.createElementVNode("view",{class:"progress-track"},[e.createElementVNode("view",{class:"progress-fill",style:e.normalizeStyle({width:100*a.result.confidence+"%"})},null,4)])])]),a.result.features?(e.openBlock(),e.createElementBlock("view",{key:0,class:"features-section"},[e.createElementVNode("text",{class:"features-title"},"主要特征"),e.createElementVNode("view",{class:"features-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.result.features,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"feature-item",key:i},[e.createElementVNode("text",{class:"feature-text"},e.toDisplayString(t),1)])))),128))])])):e.createCommentVNode("",!0)])],2)):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"actions-section"},[e.createElementVNode("button",{class:e.normalizeClass(["primary-btn",{loading:a.isLoading}]),onClick:i[1]||(i[1]=(...e)=>l.startRecognition&&l.startRecognition(...e)),disabled:!a.imageSrc||a.isLoading},[a.isLoading?(e.openBlock(),e.createElementBlock("view",{key:0,class:"btn-loader"})):e.createCommentVNode("",!0),e.createElementVNode("text",{class:"btn-text"},e.toDisplayString(a.isLoading?"正在识别中...":"开始AI识别"),1)],10,["disabled"]),a.imageSrc?(e.openBlock(),e.createElementBlock("view",{key:0,class:"secondary-actions"},[e.createElementVNode("button",{class:"secondary-btn",onClick:i[2]||(i[2]=(...e)=>l.chooseImage&&l.chooseImage(...e))},[e.createElementVNode("text",{class:"btn-icon"},"🔄"),e.createElementVNode("text",{class:"btn-text"},"重新选择")]),a.result.name?(e.openBlock(),e.createElementBlock("button",{key:0,class:"secondary-btn",onClick:i[3]||(i[3]=(...e)=>l.clearResult&&l.clearResult(...e))},[e.createElementVNode("text",{class:"btn-icon"},"🗑️"),e.createElementVNode("text",{class:"btn-text"},"清除结果")])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]),e.createElementVNode("view",{class:"footer-section"},[e.createElementVNode("button",{class:"logout-btn",onClick:i[4]||(i[4]=(...e)=>l.logout&&l.logout(...e))},[e.createElementVNode("text",{class:"logout-icon"},"👋"),e.createElementVNode("text",{class:"logout-text"},"退出登录")])]),a.imageSrc||a.result.name?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:1,class:"floating-tips"},[e.createElementVNode("text",{class:"tips-text"},"💡 选择清晰的兰花照片可以提高识别准确率")]))])}],["__scopeId","data-v-9ae3e203"]]);__definePage("pages/Login/Login",o),__definePage("pages/Recognition/Recognition",n);const a={onLaunch:function(){t("log","at App.vue:6","App Launch")},onShow:function(){t("log","at App.vue:11","App Show")},onHide:function(){t("log","at App.vue:14","App Hide")}};const{app:l,Vuex:c,Pinia:s}={app:e.createVueApp(a)};uni.Vuex=c,uni.Pinia=s,l.provide("__globalStyles",__uniConfig.styles),l._component.mpType="app",l._component.render=()=>{},l.mount("#app")}(Vue);
